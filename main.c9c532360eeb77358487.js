(()=>{"use strict";"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("service-worker.js").then((t=>{console.log("SW registered: ",t)})).catch((t=>{console.log("SW registration failed: ",t)}))}));let t=0,e=parseInt(localStorage.getItem("best")||"0"),o=e-1;const r=document.getElementById("score"),n=document.getElementById("best-score"),s=document.getElementById("grid"),a=document.documentElement;n.onanimationend=()=>{n.classList.remove("best-animate"),a.style.setProperty("--old-best",`"${e}"`),o=e},r.onanimationend=()=>{r.classList.remove("animate"),a.style.setProperty("--old",`"${t}"`)};const i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);function l(){a.style.setProperty("--new",`"${t}"`),r.classList.add("animate"),o!==e&&(a.style.setProperty("--new-best",`"${e}"`),n.classList.add("best-animate"))}function d(){const e=function(){let e;if(t>=14)return 20;for(e=t+3;[7,11,13,14,17,18,19].includes(e);)e+=1;return e}(),o=function(t){let e=1,o=t;for(const r of[2,3,4])t%r==0&&t/r!=1&&(e=r,o=t/r);return[e,o]=[e,o].sort(),{x:e,y:o}}(e),[r,n]=function(){const e=Math.ceil(150*Math.pow(.97,t)),o={h:Math.floor(360*Math.random()),s:100-Math.floor(Math.random()*(e/150)*50),l:Math.random()<.5?50-Math.floor(25*Math.random()/Math.sqrt(e)):50+Math.floor(25*Math.random()/Math.sqrt(e))},r=function(t,e){const o=Math.random()<.5?t.l+e/5:t.l-e/5;return{h:t.h,s:t.s,l:o}}(o,e);return[`hsl(${o.h},${o.s}%,${o.l}%)`,`hsl(${r.h},${r.s}%,${r.l}%)`]}(),l=Math.floor(Math.random()*e);!function(){for(;s.firstChild;)s.removeChild(s.lastChild)}(),a.style.setProperty("--x",o.x.toString()),a.style.setProperty("--y",o.y.toString()),a.style.setProperty("--color",r),a.style.setProperty("--different",n);for(let t=0;t<e;t++){const e=document.createElement("div");e.classList.add("box"),i?e.addEventListener("touchstart",c,!1):e.addEventListener("click",c,!1),t===l&&e.classList.add("different"),s.appendChild(e)}}function c(o){o.preventDefault(),o.target.classList[1]?(t++,t>e&&(e++,localStorage.setItem("best",e.toString()))):t=0,l(),d()}window.onload=()=>(l(),void d())})();